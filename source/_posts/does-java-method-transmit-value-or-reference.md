---
title: Java老司机翻车系列-Java里方法的传值类型
date: 2016-09-08 21:41:05
tags:
- java
category:
- java
- 老司机翻车系列
---

> 从毕业到现在，换了几份工作，面了也不下十几家公司了。每次一份面试题总是少不了的。而每一份面试题里面也总少不了一种类型题目的身影，那就是方法参数值传递类型判断。像我如此自信，如此经验丰富的老司机，（夸自己不脸红，啊哈哈），那天高速行驶居然也翻了车。

坐公交闲来无事，找了个APP看看面试的算法题，准备准备明年的重要面试。十道题下来，错了两道，其中有一道，java题，看了答案我还是觉得自己试对的，肯定是答案写错了（自信过了头），回到家之间上机把程序敲了一遍运行，结果还是我思考错了，有个地方思维出现了误差。

题目很简单，就是给出下面这段小程序的运行结果：

```java

class Value {
    public int i = 15;
}

public class Test_1 {
    public static void main(String argv[]) {
        Test_1 t = new Test_1();
        t.first();
    }

    public void first() {
        int i=5;
        Value v = new Value();
        v.i = 25;
        second(v, i);
        System.out.println(v.i);
    }

    public void second (Value v, int i) {
        i = 0;
        v.i = 20;
        Value val = new Value();
        v = val;
        System.out.println(v.i + " "+i);
    }
}



```

我认为是 `15 0 15`,而正确答案是`15 0 20`，让我现在回过头去看，我也一定会给出正确的答案，但是当时就是脑子短路了一下。

我的思维错误的关键就在与，我知道Value是对象，我知道java中对于对象传递的是引用，我认为传递的是v这个引用句柄本身，然后到了方法内，这个句柄被修改指向新的对象，新的对象i的值还是默认值15，所以得出答案`15 0 15`。

但是正确的传递应该是，`second`方法自己有一个句柄，指向了传进来句柄指向的引用，相当于同时两个句柄指向了同一个引用，second方法中修改的只是新的句柄的引用。

有时候我们认为我们已经再清楚不过的东西，再熟悉不过的原理，一不小心，也有让老司机翻车的可能性。

俗话说，淹死的都是会水的。

以此为戒。

end.